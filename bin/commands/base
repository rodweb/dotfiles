#!/usr/bin/env bash
set -e

function define_command() {
  name="$1"
  get_options="$2"
  execute="$3"
  selected="$4"

  is_menu="${MENU:-0}"

  [[ -n "$selected" ]] && $execute "$selected" && exit

  if [[ "$is_menu" -eq "1" ]]; then
    get_options
    exit
  fi

  function filter() {
    dmenu -p "$name:"
  }

  selected=$($get_options | filter)
  [[ -z "$selected" ]] && exit
  "$0" "$selected"
}

